[build]
  # Base directory for the build (relative to repository root)
  # Your Angular app is in NotesApi/notes-web
  base = "NotesApi/notes-web"
  
  # Build command - build Angular app as static site (browser only, no SSR)
  # The --output-hashing=all ensures proper cache busting
  command = "npm install && npm run build -- --output-hashing=all"
  
  # Directory to publish (output directory after build)
  # Angular outputs to dist/notes-web/browser
  publish = "dist/notes-web/browser"

# Disable automatic Angular plugin detection
# We're building a static site, so we don't need SSR plugins
[build.processing]
  skip_processing = false

# Redirect all routes to index.html for Angular routing (SPA)
# This ensures Angular routes work on refresh
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Optional: Set Node version (Netlify will auto-detect, but you can specify)
# [build.environment]
#   NODE_VERSION = "20"
